# 公考速算练习 iOS App 开发计划

## 项目概述

**产品定位**: 专注于公务员考试中行测部分计算能力提升的速算练习 iOS App
**技术栈**: SwiftUI + SwiftData + Swift iOS 原生开发
**设计风格**: 参考 Apple 原生应用，简约自然，无干扰设计

## 第一版功能开发计划 (v1.0 MVP)

### 阶段一：项目架构设计和基础框架搭建 (预计 3-4 天)

#### 1.1 项目架构设计
- [ ] **MVVM 架构设计**
  - 设计 ViewModel 层处理业务逻辑
  - 设计 Model 层定义数据结构
  - 设计 View 层实现 SwiftUI 界面
- [ ] **核心数据模型设计**
  - 题目模型 (Question)
  - 练习记录模型 (PracticeSession)
  - 错题记录模型 (WrongAnswer)
  - 用户统计模型 (UserStats)
- [ ] **Swift Data 数据库设计**
  - 设计数据实体关系图
  - 创建 Swift Data Model 文件
  - 实现数据持久化管理器

#### 1.2 基础框架搭建
- [ ] **项目结构重构**
  ```
  IQuickCal/
  ├── Models/           # 数据模型
  ├── Views/            # SwiftUI 视图
  ├── ViewModels/       # 视图模型
  ├── Services/         # 业务服务
  ├── Utils/            # 工具类
  ├── Resources/        # 资源文件
  └── Core/             # 核心功能
  ```
- [ ] **依赖注入容器设置**
- [ ] **导航系统设计** (TabView + NavigationView)
- [ ] **主题和样式系统**

### 阶段二：核心业务逻辑开发 (预计 5-6 天)

#### 2.1 题目生成引擎
- [ ] **题型算法实现**
  - 两位数加法生成器 (27 + 56)
  - 两位数减法生成器 (89 - 34)
  - 三位数加法生成器 (143 + 258)
  - 三位数减法生成器 (726 - 319)
  - 两位数×一位数生成器 (25 × 7)
  - 多位数÷两位数生成器 (86313 ÷ 41 → 商首位)
  - 多位数÷三位数生成器 (86313 ÷ 411 → 商前两位)
  - 四位数÷四位数生成器 (四选一，保留两位小数)

- [ ] **题目配置系统**
  - 可配置每类题目数量 (默认20题)
  - 难度等级设置
  - 题目随机化算法

#### 2.2 练习核心逻辑
- [ ] **计时器系统**
  - 全局计时器
  - 单题计时器
  - 暂停/恢复功能
- [ ] **答案验证系统**
  - 精确答案匹配
  - 小数位数验证 (除法题)
- [ ] **练习状态管理**
  - 进度跟踪
  - 答题记录
  - 错题自动捕获

#### 2.3 数据统计系统
- [ ] **实时统计计算**
  - 正确率计算
  - 平均用时计算
  - 错误次数统计
- [ ] **历史数据管理**
  - 练习记录持久化
  - 按题型分类统计
  - 趋势分析算法

### 阶段三：用户界面开发 (预计 7-8 天)

#### 3.1 主界面开发
- [ ] **首页 (HomeView)**
  - 快速开始卡片
  - 题型选择网格
  - 最近练习记录
  - Apple 风格导航栏

- [ ] **练习界面 (PracticeView)**
  - 进度条显示
  - 题目展示区域
  - 数字键盘组件
  - 计时器显示
  - 答案输入框
  - 正确/错误动画反馈

- [ ] **结果页面 (ResultView)**
  - 成绩总览卡片
  - 统计数据可视化
  - 圆环进度图
  - 错题快速查看
  - 重新练习按钮

#### 3.2 功能页面开发
- [ ] **错题本 (MistakesView)**
  - 错题列表展示
  - 按题型筛选
  - 重做功能
  - 标记已掌握
  - 清空记录功能

- [ ] **历史记录 (HistoryView)**
  - 练习历史列表
  - 时间筛选 (今天/本周/本月)
  - 图表数据展示 (使用 Charts 框架)
  - 按题型统计分析

- [ ] **设置页面 (SettingsView)**
  - 题目数量配置
  - 音效开关
  - 数据备份/恢复
  - 关于页面

#### 3.3 UI/UX 细节优化
- [ ] **动画效果**
  - 页面转场动画
  - 按钮点击反馈
  - 正确/错误颜色闪烁
  - 进度条动画
- [ ] **交互优化**
  - 手势识别
  - 触觉反馈
  - 无感答案提交
  - 键盘自动管理

### 阶段四：数据可视化和图表 (预计 3-4 天)

#### 4.1 统计图表实现
- [ ] **Charts 框架集成**
- [ ] **正确率趋势图**
- [ ] **平均用时柱状图**
- [ ] **题型分布饼图**
- [ ] **练习热力图概念设计**

#### 4.2 数据分析功能
- [ ] **弱项检测算法**
- [ ] **进步趋势分析**
- [ ] **个人报告生成**

### 阶段五：测试和优化 (预计 4-5 天)

#### 5.1 功能测试
- [ ] **单元测试编写**
  - 题目生成算法测试
  - 统计计算逻辑测试
  - 数据持久化测试
- [ ] **UI 测试**
  - 界面交互测试
  - 不同屏幕尺寸适配
  - 暗黑模式支持

#### 5.2 性能优化
- [ ] **内存管理优化**
- [ ] **数据库查询优化**
- [ ] **界面渲染性能优化**
- [ ] **启动速度优化**

#### 5.3 用户体验测试
- [ ] **可用性测试**
- [ ] **无障碍支持**
- [ ] **错误处理优化**
- [ ] **边界情况处理**

## 技术实现细节

### 核心技术选型
- **UI 框架**: SwiftUI
- **数据持久化**: SwiftData
- **图表库**: Swift Charts (iOS 16+)
- **架构模式**: MVVM + Combine
- **依赖管理**: Swift Package Manager

### 关键组件设计

#### 1. 题目生成器 (QuestionGenerator)
```swift
protocol QuestionGenerator {
    func generateQuestions(type: QuestionType, count: Int) -> [Question]
}
```

#### 2. 练习管理器 (PracticeManager)
```swift
class PracticeManager: ObservableObject {
    @Published var currentQuestion: Question?
    @Published var progress: Double
    @Published var timeElapsed: TimeInterval
    // 练习状态管理
}
```

#### 3. 统计计算器 (StatisticsCalculator)
```swift
class StatisticsCalculator {
    func calculate(session: PracticeSession) -> SessionStats
    func getHistoricalStats(for type: QuestionType) -> HistoricalStats
}
```

### 数据模型设计

#### SwiftData 实体
- **Question**: 题目信息
- **PracticeSession**: 练习会话
- **Answer**: 答题记录
- **WrongAnswer**: 错题记录
- **UserPreferences**: 用户设置

### UI 组件库

#### 自定义组件
- **NumberPadView**: 数字键盘组件
- **ProgressRingView**: 圆环进度组件
- **StatCardView**: 统计卡片组件
- **ChartView**: 图表封装组件

## 项目时间线

| 阶段 | 工作内容 | 预计时间 | 累计时间 |
|------|----------|----------|----------|
| 阶段一 | 架构设计和基础框架 | 3-4天 | 4天 |
| 阶段二 | 核心业务逻辑开发 | 5-6天 | 10天 |
| 阶段三 | 用户界面开发 | 7-8天 | 18天 |
| 阶段四 | 数据可视化和图表 | 3-4天 | 22天 |
| 阶段五 | 测试和优化 | 4-5天 | 27天 |

**预计总开发时间**: 25-27个工作日

## 第二版本规划 (v2.0+)

### AI 功能集成 (预计开发时间: 2-3周)
- [ ] **OpenAI API 集成**
- [ ] **用户弱项智能检测**
- [ ] **个性化出题算法**
- [ ] **AI 学习建议生成**
- [ ] **智能训练计划制定**

### 游戏化功能 (预计开发时间: 2周)
- [ ] **速算小游戏设计**
- [ ] **成就系统**
- [ ] **等级系统**
- [ ] **每日挑战**

### 高级功能 (预计开发时间: 1-2周)
- [ ] **练习热力图**
- [ ] **番茄钟模式**
- [ ] **iCloud 同步**
- [ ] **Apple Watch 支持**
- [ ] **Widget 小组件**

## 风险评估和缓解策略

### 技术风险
- **SwiftData 复杂查询性能**: 提前进行性能测试，必要时使用 SQLite
- **SwiftUI 兼容性**: 设定最低系统版本 iOS 15+
- **大量数据展示性能**: 实现分页加载和数据缓存

### 时间风险
- **UI 细节调优耗时**: 预留20%缓冲时间
- **测试阶段问题修复**: 采用迭代开发，及时发现问题

### 质量风险
- **用户体验一致性**: 严格遵循 Apple HIG 设计规范
- **数据准确性**: 实现完整的单元测试覆盖

## 成功指标

### 功能完整性
- [ ] 8种题型全部实现
- [ ] 统计功能准确无误
- [ ] 错题本功能完整
- [ ] 历史记录正常展示

### 性能指标
- [ ] App 启动时间 < 2秒
- [ ] 答题响应时间 < 0.5秒
- [ ] 内存使用稳定 < 100MB
- [ ] 崩溃率 < 0.1%

### 用户体验
- [ ] 界面风格符合 Apple 设计规范
- [ ] 操作流程简洁直观
- [ ] 动画效果流畅自然
- [ ] 支持暗黑模式

---

*本开发计划将根据实际开发进度和用户反馈进行动态调整*
